{"ast":null,"code":"var _jsxFileName = \"/home/csgarciamartinez/Telar/telar-client/src/Sala.js\";\nimport { io } from 'socket.io-client';\nimport Jugador from './Jugador';\nimport ItemTypes from './ItemTypes';\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport './sala.css';\nimport { DndProvider, useDrag, useDrop } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend'; //Called from Sala to start the game. Probably not in the right place\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction comenzar(skt, salaname) {\n  console.log(`Se mando un request para comenzar el juego`);\n  skt.current.emit('comenzar-juego', salaname);\n}\n\n; //Sala. Props inclused sala and socket info\n//TODO: Fix everything related to \"espera\", incl the fact you can play during it\n\nfunction Sala(props) {\n  console.log(`Se actualizo la sala de juego`);\n  var jugadores = [];\n  const client = props.socket;\n  const nombre = props.sala[\"sala\"];\n  var espera = \"\";\n  var usrIdx = 0; //La posicion del jugador en la sala\n\n  if (props.sala[\"activo\"]) {\n    for (const usr in props.sala[\"usuarios\"]) {\n      console.log(props.sala[\"usuarios\"][usr][\"usuario\"]);\n      console.log(client.current.id);\n\n      if (props.sala[\"usuarios\"][usr][\"usuario\"] == client.current.id) {\n        jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n          jugador: usr,\n          activo: true,\n          sala: props.sala,\n          socket: client\n        }, props.sala[\"usuarios\"][usr][\"usuario\"], false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 24\n        }, this));\n        usrIdx = usr;\n      } else {\n        jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n          jugador: usr,\n          activo: false,\n          sala: props.sala,\n          socket: client\n        }, props.sala[\"usuarios\"][usr][\"usuario\"], false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 24\n        }, this));\n      }\n    }\n  } else {\n    for (const usr in props.sala[\"usuarios\"]) {\n      jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n        jugador: usr,\n        sala: props.sala\n      }, props.sala[\"usuarios\"][usr][\"usuario\"], false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 22\n      }, this));\n    }\n  }\n\n  if (props.sala[\"espera\"]) {\n    espera = \"espera\";\n  }\n\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Sala de juego \\\"\", props.sala[\"sala\"], \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: espera,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"sala\",\n        children: props.sala[\"activo\"] ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"jugadores\",\n            children: jugadores\n          }, \"boards1\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"comenzarBtn\",\n            children: jugadores[usrIdx].renderGoButton()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"jugadores\",\n            children: jugadores\n          }, \"boards2\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"comenzarBtn\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => comenzar(client, nombre),\n              children: \"Comenzar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 80,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Sala;\nexport default Sala;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sala\");","map":{"version":3,"names":["io","Jugador","ItemTypes","React","ReactDOM","DndProvider","useDrag","useDrop","HTML5Backend","comenzar","skt","salaname","console","log","current","emit","Sala","props","jugadores","client","socket","nombre","sala","espera","usrIdx","usr","id","push","renderGoButton"],"sources":["/home/csgarciamartinez/Telar/telar-client/src/Sala.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport Jugador from './Jugador';\nimport ItemTypes from './ItemTypes'\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport'./sala.css';\nimport {DndProvider, useDrag, useDrop} from 'react-dnd'\nimport{HTML5Backend} from 'react-dnd-html5-backend'\n\n\n//Called from Sala to start the game. Probably not in the right place\nfunction comenzar(skt, salaname){\n  console.log(`Se mando un request para comenzar el juego`);\n  skt.current.emit('comenzar-juego', salaname);\n};\n\n//Sala. Props inclused sala and socket info\n//TODO: Fix everything related to \"espera\", incl the fact you can play during it\nfunction Sala(props){\n  console.log(`Se actualizo la sala de juego`)\n  var jugadores = [];\n\n  const client = props.socket;\n  const nombre = props.sala[\"sala\"]\n  var espera = \"\"\n  var usrIdx = 0 //La posicion del jugador en la sala\n\n  if(props.sala[\"activo\"]){\n    for(const usr in props.sala[\"usuarios\"]){\n      console.log(props.sala[\"usuarios\"][usr][\"usuario\"])\n      console.log(client.current.id)\n      if(props.sala[\"usuarios\"][usr][\"usuario\"] == client.current.id){\n        jugadores.push(<Jugador jugador = {usr}\n                              activo = {true}\n                              sala = {props.sala}\n                              socket = {client}\n                              key = {props.sala[\"usuarios\"][usr][\"usuario\"]}/>)\n        usrIdx = usr\n      } else {\n        jugadores.push(<Jugador jugador = {usr}\n                              activo = {false}\n                              sala = {props.sala}\n                              socket = {client}\n                              key = {props.sala[\"usuarios\"][usr][\"usuario\"]}/>)\n      }\n    }\n  } else {\n    for(const usr in props.sala[\"usuarios\"]){\n      jugadores.push(<Jugador jugador = {usr}\n                              sala = {props.sala} \n                              key={props.sala[\"usuarios\"][usr][\"usuario\"]}/>);\n    }\n  }\n\n  if(props.sala[\"espera\"]){\n    espera = \"espera\"\n  }\n\n  return(\n    <DndProvider backend={HTML5Backend}>\n    <div> \n      <h1>Sala de juego \"{props.sala[\"sala\"]}\"</h1>\n      <div id = {espera}> </div>\n      <div class =\"sala\">\n        {props.sala[\"activo\"]\n          ? \n            <div>\n              <div class=\"jugadores\" key=\"boards1\">{jugadores}</div>\n              <div id =\"comenzarBtn\">\n                {jugadores[usrIdx].renderGoButton()}\n              </div>\n              </div>\n            :\n            <div>\n            <div class=\"jugadores\" key=\"boards2\"> \n            {jugadores}\n            </div>\n            <div id=\"comenzarBtn\">\n              <button onClick={() => comenzar(client, nombre)}>\n                Comenzar\n              </button>\n            </div>\n          </div>\n        }\n      </div>\n    </div>\n    </DndProvider>\n  )\n}\n\nexport default Sala;"],"mappings":"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"},"metadata":{},"sourceType":"module"}