{"ast":null,"code":"var _jsxFileName = \"/home/csgarciamartinez/Telar/telar-client/src/Sala.js\";\nimport { io } from 'socket.io-client';\nimport Jugador from './Jugador';\nimport ItemTypes from './ItemTypes';\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport './sala.css';\nimport { DndProvider, useDrag, useDrop } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fs = require('./server/funcionesServidor.js'); //Called from Sala to start the game. Probably not in the right place\n\n\nfunction comenzar(skt, sala) {\n  if (!sala[\"local\"]) {\n    console.log(`Se mando un request para comenzar el juego`);\n    skt.current.emit('comenzar-juego', sala[\"sala\"]);\n  } else {\n    sala[\"fichas\"] = fs.crearFichas();\n    fs.distribuirFichas(sala, 0);\n    console.log(sala);\n    sala[\"nombre\"] = \"POPO\";\n    return sala;\n  }\n}\n\n; //Sala. Props inclused sala and socket info\n//TODO: Fix everything related to \"espera\", incl the fact you can play during it\n\nfunction Sala(props) {\n  console.log(`Se actualizo la sala de juego`);\n  var jugadores = [];\n  const client = props.socket;\n  const nombre = props.sala[\"sala\"];\n  var espera = \"\";\n  var usr_id = 0; //La posicion del jugador en la sala\n\n  if (props.sala[\"activo\"]) {\n    for (const usr in props.sala[\"usuarios\"]) {\n      console.log(props.sala[\"usuarios\"][usr][\"usuario\"]);\n      console.log(client.current.id);\n\n      if (props.sala[\"usuarios\"][usr][\"usuario\"] == client.current.id) {\n        jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n          jugador: usr,\n          activo: true,\n          sala: props.sala,\n          socket: client\n        }, props.sala[\"usuarios\"][usr][\"usuario\"], false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 24\n        }, this));\n      } else {\n        jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n          jugador: usr,\n          activo: false,\n          sala: props.sala,\n          socket: client\n        }, props.sala[\"usuarios\"][usr][\"usuario\"], false, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 24\n        }, this));\n      }\n    }\n  } else {\n    for (const usr in props.sala[\"usuarios\"]) {\n      jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n        jugador: usr,\n        sala: props.sala\n      }, props.sala[\"usuarios\"][usr][\"usuario\"], false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 22\n      }, this));\n    }\n  }\n\n  if (props.sala[\"espera\"]) {\n    espera = \"espera\";\n  }\n\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Sala de juego \\\"\", props.sala[\"sala\"], \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: espera,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"sala\",\n        children: props.sala[\"activo\"] ? /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"jugadores\",\n          children: jugadores\n        }, \"boards1\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"jugadores\",\n            children: jugadores\n          }, \"boards2\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"comenzarBtn\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => comenzar(client, props.sala),\n              children: \"Comenzar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Sala;\nexport default Sala;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sala\");","map":{"version":3,"names":["io","Jugador","ItemTypes","React","ReactDOM","DndProvider","useDrag","useDrop","HTML5Backend","fs","require","comenzar","skt","sala","console","log","current","emit","crearFichas","distribuirFichas","Sala","props","jugadores","client","socket","nombre","espera","usr_id","usr","id","push"],"sources":["/home/csgarciamartinez/Telar/telar-client/src/Sala.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport Jugador from './Jugador';\nimport ItemTypes from './ItemTypes'\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport'./sala.css';\nimport {DndProvider, useDrag, useDrop} from 'react-dnd'\nimport{HTML5Backend} from 'react-dnd-html5-backend'\n\nconst fs = require('./server/funcionesServidor.js');\n\n\n//Called from Sala to start the game. Probably not in the right place\nfunction comenzar(skt, sala){\n  if(!sala[\"local\"]){\n    console.log(`Se mando un request para comenzar el juego`);\n    skt.current.emit('comenzar-juego', sala[\"sala\"]);\n  } else {\n    sala[\"fichas\"] = fs.crearFichas()\n    fs.distribuirFichas(sala, 0)\n    console.log(sala)\n    sala[\"nombre\"] = \"POPO\"\n    return sala\n  }\n};\n\n//Sala. Props inclused sala and socket info\n//TODO: Fix everything related to \"espera\", incl the fact you can play during it\nfunction Sala(props){\n  console.log(`Se actualizo la sala de juego`)\n  var jugadores = [];\n\n  const client = props.socket;\n  const nombre = props.sala[\"sala\"]\n  var espera = \"\"\n  var usr_id = 0 //La posicion del jugador en la sala\n\n  if(props.sala[\"activo\"]){\n    for(const usr in props.sala[\"usuarios\"]){\n      console.log(props.sala[\"usuarios\"][usr][\"usuario\"])\n      console.log(client.current.id)\n      if(props.sala[\"usuarios\"][usr][\"usuario\"] == client.current.id){\n        jugadores.push(<Jugador jugador = {usr}\n                              activo = {true}\n                              sala = {props.sala}\n                              socket = {client}\n                              key = {props.sala[\"usuarios\"][usr][\"usuario\"]}/>)\n      } else {\n        jugadores.push(<Jugador jugador = {usr}\n                              activo = {false}\n                              sala = {props.sala}\n                              socket = {client}\n                              key = {props.sala[\"usuarios\"][usr][\"usuario\"]}/>)\n      }\n    }\n  } else {\n    for(const usr in props.sala[\"usuarios\"]){\n      jugadores.push(<Jugador jugador = {usr}\n                              sala = {props.sala} \n                              key={props.sala[\"usuarios\"][usr][\"usuario\"]}/>);\n    }\n  }\n\n  if(props.sala[\"espera\"]){\n    espera = \"espera\"\n  }\n\n  return(\n    <DndProvider backend={HTML5Backend}>\n    <div> \n      <h1>Sala de juego \"{props.sala[\"sala\"]}\"</h1>\n      <div id = {espera}> </div>\n      <div class =\"sala\">\n        {props.sala[\"activo\"]\n          ? \n            <div class=\"jugadores\" key=\"boards1\">{jugadores}</div>\n            :\n            <div>\n            <div class=\"jugadores\" key=\"boards2\"> \n            {jugadores}\n            </div>\n            <div id=\"comenzarBtn\">\n              <button onClick={() => comenzar(client, props.sala)}>\n                Comenzar\n              </button>\n            </div>\n          </div>\n        }\n      </div>\n    </div>\n    </DndProvider>\n  )\n}\n\nexport default Sala;"],"mappings":"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"},"metadata":{},"sourceType":"module"}