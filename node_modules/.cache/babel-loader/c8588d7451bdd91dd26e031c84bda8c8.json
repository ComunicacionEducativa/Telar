{"ast":null,"code":"var _jsxFileName = \"/home/csgarciamartinez/Telar/telar-client/src/Sala.js\",\n    _s = $RefreshSig$();\n\nimport { io } from 'socket.io-client';\nimport Jugador from './Jugador';\nimport ItemTypes from './ItemTypes';\nimport React from 'react';\nimport { useEffect, useState, useRef } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport './sala.css';\nimport { DndProvider, useDrag, useDrop } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst fs = require('./server/funcionesServidor.js'); //Called from Sala to start the game. Probably not in the right place\n\n\nfunction comenzar(skt, sala) {\n  if (!sala[\"local\"]) {\n    console.log(`Se mando un request para comenzar el juego`);\n    skt.current.emit('comenzar-juego', sala[\"sala\"]);\n  } else {\n    sala[\"fichas\"] = fs.crearFichas();\n    fs.distribuirFichas(sala, 0);\n    console.log(sala);\n    sala[\"sala\"] = \"POPO\";\n    return sala;\n  }\n}\n\n; //Sala. Props inclused sala and socket info\n//TODO: Fix everything related to \"espera\", incl the fact you can play during it\n\nconst Sala = _ref => {\n  _s();\n\n  let {\n    sala,\n    socket,\n    setSala,\n    setTurno,\n    setRonda\n  } = _ref;\n  console.log(sala);\n  console.log(`Se actualizo la sala de juego`);\n  var jugadores = [];\n  const client = socket;\n  var espera = \"\";\n  var usr_id = 0; //La posicion del jugador en la sala\n\n  useEffect(() => {\n    console.log(sala);\n  }, [sala]);\n\n  const comenzar = () => {\n    sala[\"sala\"] = \"POO\";\n    sala[\"activo\"] = true;\n    setSala(sala);\n    setTurno(0);\n    setRonda(0);\n    console.log(JSON.stringify(sala));\n    console.log(sala);\n  };\n\n  if (sala[\"activo\"]) {\n    for (const usr in sala[\"usuarios\"]) {\n      console.log(sala[\"usuarios\"][usr][\"usuario\"]);\n      console.log(client.current.id);\n\n      if (sala[\"usuarios\"][usr][\"usuario\"] == client.current.id) {\n        jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n          jugador: usr,\n          activo: true,\n          sala: sala,\n          socket: client\n        }, sala[\"usuarios\"][usr][\"usuario\"], false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 24\n        }, this));\n      } else {\n        jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n          jugador: usr,\n          activo: false,\n          sala: sala,\n          socket: client\n        }, sala[\"usuarios\"][usr][\"usuario\"], false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 24\n        }, this));\n      }\n    }\n  } else {\n    for (const usr in sala[\"usuarios\"]) {\n      jugadores.push( /*#__PURE__*/_jsxDEV(Jugador, {\n        jugador: usr,\n        sala: sala\n      }, sala[\"usuarios\"][usr][\"usuario\"], false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 22\n      }, this));\n    }\n  }\n\n  if (sala[\"espera\"]) {\n    espera = \"espera\";\n  }\n\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: [\"Sala de juego \\\"\", sala[\"sala\"], \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: espera,\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"sala\",\n        children: sala[\"activo\"] ? /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"jugadores\",\n          children: jugadores\n        }, \"boards1\", false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"jugadores\",\n            children: jugadores\n          }, \"boards2\", false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"comenzarBtn\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: comenzar,\n              children: \"Comenzar\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Sala, \"OD7bBpZva5O2jO+Puf00hKivP7c=\");\n\n_c = Sala;\nexport default Sala;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sala\");","map":{"version":3,"names":["io","Jugador","ItemTypes","React","useEffect","useState","useRef","ReactDOM","DndProvider","useDrag","useDrop","HTML5Backend","fs","require","comenzar","skt","sala","console","log","current","emit","crearFichas","distribuirFichas","Sala","socket","setSala","setTurno","setRonda","jugadores","client","espera","usr_id","JSON","stringify","usr","id","push"],"sources":["/home/csgarciamartinez/Telar/telar-client/src/Sala.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport Jugador from './Jugador';\nimport ItemTypes from './ItemTypes'\nimport React from 'react';\nimport { useEffect, useState, useRef } from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport'./sala.css';\nimport {DndProvider, useDrag, useDrop} from 'react-dnd'\nimport{HTML5Backend} from 'react-dnd-html5-backend'\n\nconst fs = require('./server/funcionesServidor.js');\n\n\n//Called from Sala to start the game. Probably not in the right place\nfunction comenzar(skt, sala){\n  if(!sala[\"local\"]){\n    console.log(`Se mando un request para comenzar el juego`);\n    skt.current.emit('comenzar-juego', sala[\"sala\"]);\n  } else {\n    sala[\"fichas\"] = fs.crearFichas()\n    fs.distribuirFichas(sala, 0)\n    console.log(sala)\n    sala[\"sala\"] = \"POPO\"\n    return sala\n  }\n};\n\n//Sala. Props inclused sala and socket info\n//TODO: Fix everything related to \"espera\", incl the fact you can play during it\nconst Sala = ({sala, socket, setSala, setTurno, setRonda}) => {\n  console.log(sala)\n  console.log(`Se actualizo la sala de juego`)\n  var jugadores = [];\n\n  const client = socket;\n  var espera = \"\"\n  var usr_id = 0 //La posicion del jugador en la sala\n\n  useEffect(() => {\n    console.log(sala)\n  }, [sala])\n\n  const comenzar = () =>{\n    sala[\"sala\"] = \"POO\"\n    sala[\"activo\"] = true\n    setSala(sala)\n    setTurno(0)\n    setRonda(0)\n    console.log(JSON.stringify(sala))\n    console.log(sala)\n  }\n\n  if(sala[\"activo\"]){\n    for(const usr in sala[\"usuarios\"]){\n      console.log(sala[\"usuarios\"][usr][\"usuario\"])\n      console.log(client.current.id)\n      if(sala[\"usuarios\"][usr][\"usuario\"] == client.current.id){\n        jugadores.push(<Jugador jugador = {usr}\n                              activo = {true}\n                              sala = {sala}\n                              socket = {client}\n                              key = {sala[\"usuarios\"][usr][\"usuario\"]}/>)\n      } else {\n        jugadores.push(<Jugador jugador = {usr}\n                              activo = {false}\n                              sala = {sala}\n                              socket = {client}\n                              key = {sala[\"usuarios\"][usr][\"usuario\"]}/>)\n      }\n    }\n  } else {\n    for(const usr in sala[\"usuarios\"]){\n      jugadores.push(<Jugador jugador = {usr}\n                              sala = {sala} \n                              key={sala[\"usuarios\"][usr][\"usuario\"]}/>);\n    }\n  }\n\n  if(sala[\"espera\"]){\n    espera = \"espera\"\n  }\n\n  return(\n    <DndProvider backend={HTML5Backend}>\n    <div> \n      <h1>Sala de juego \"{sala[\"sala\"]}\"</h1>\n      <div id = {espera}> </div>\n      <div class =\"sala\">\n        {sala[\"activo\"]\n          ? \n            <div class=\"jugadores\" key=\"boards1\">{jugadores}</div>\n            :\n            <div>\n            <div class=\"jugadores\" key=\"boards2\"> \n            {jugadores}\n            </div>\n            <div id=\"comenzarBtn\">\n              <button onClick={comenzar}>\n                Comenzar\n              </button>\n            </div>\n          </div>\n        }\n      </div>\n    </div>\n    </DndProvider>\n  )\n}\n\nexport default Sala;"],"mappings":"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"},"metadata":{},"sourceType":"module"}