{"ast":null,"code":"var _jsxFileName = \"/home/csgarciamartinez/Telar/telar-client/src/Sala.js\";\nimport { io } from 'socket.io-client';\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport { DndProvider, useDrag, useDrop } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend'; //Called from Sala to start the game. Probably not in the right place\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction startGame(skt, roomname) {\n  console.log(`Se mando un request para comenzar el juego`);\n  skt.current.emit('comenzar-juego', roomname);\n}\n\n; //Sala. Props inclused room and socket info\n\nfunction Sala(props) {\n  //TODO: You can still play even if \"espera\" is on. Will fix during the refactor, when\n  // I just pass in props.room[users][usr] instead of mirroring \n  var boards = [];\n  const client = props.socket;\n  const roomname = props.room[\"sala\"];\n  console.log(roomname);\n  const fichas = props.room[\"fichas\"];\n  var espera = \"\";\n  console.log(`Game room has updated, client: ${client.current.id}`);\n  console.log(`En el turno del jugador ${props.room[\"turno\"]}`);\n\n  if (props.room[\"activo\"]) {\n    var idx = 0;\n\n    for (const usr in props.room[\"usuarios\"]) {\n      console.log(`COLUMNAS: ${props.room[\"usuarios\"][usr][\"columnas\"]}`);\n      console.log(`CANASTA: ${props.room[\"usuarios\"][usr][\"canasta\"]}`);\n      var columnas = \"0\";\n\n      if (props.room[\"usuarios\"][usr][\"canasta\"]) {\n        var columnas = props.room[\"usuarios\"][usr][\"canasta\"].toString();\n      } //TODO: Why do i not just pass in props.room[users][usr] instead of pulling basically everything \n      //out of it here?\n\n\n      boards.push( /*#__PURE__*/_jsxDEV(Player, {\n        fichas: props.room[\"usuarios\"][usr][\"canasta\"],\n        activo: props.room[\"activo\"],\n        columnas: props.room[\"usuarios\"][usr][\"columnas\"],\n        socket: client,\n        roomname: roomname,\n        username: props.room[\"usuarios\"][usr][\"usuario\"],\n        puntuacion: props.room[\"usuarios\"][usr][\"puntuacion\"],\n        fichasEnCuarto: props.room[\"fichas\"],\n        tablero: props.room[\"usuarios\"][usr][\"tablero\"].flat(),\n        turno: props.room[\"turno\"],\n        room: props.room,\n        ronda: props.room[\"ronda\"],\n        basura: props.room[\"usuarios\"][usr][\"basura\"]\n      }, props.room[\"usuarios\"][usr][\"usuario\"], false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 19\n      }, this));\n    }\n  } else {\n    for (const usr in props.room[\"usuarios\"]) {\n      boards.push( /*#__PURE__*/_jsxDEV(Player, {\n        puntuacion: props.room[\"usuarios\"][usr][\"puntuacion\"]\n      }, usr, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 19\n      }, this));\n    }\n  }\n\n  console.log(props.room[\"espera\"]);\n\n  if (props.room[\"espera\"]) {\n    console.log(\"626 EN ESPERA .... \");\n    espera = \"espera\";\n  }\n\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\" In room \", props.room[\"sala\"]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: espera,\n        children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \" PLEASE WAIT FOR RECONNECT \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 27\n        }, this), \" \"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 7\n      }, this), fichas.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"inline-flex\"\n        },\n        children: boards\n      }, \"boards1\", false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: \"inline-flex\"\n        },\n        children: [boards, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => startGame(client, roomname),\n          children: \"Start game\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 9\n        }, this)]\n      }, \"boards2\", true, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_c = Sala;\nexport default Sala;\n\nvar _c;\n\n$RefreshReg$(_c, \"Sala\");","map":{"version":3,"names":["io","React","ReactDOM","DndProvider","useDrag","useDrop","HTML5Backend","startGame","skt","roomname","console","log","current","emit","Sala","props","boards","client","socket","room","fichas","espera","id","idx","usr","columnas","toString","push","flat","length","display"],"sources":["/home/csgarciamartinez/Telar/telar-client/src/Sala.js"],"sourcesContent":["import { io } from 'socket.io-client';\nimport React from 'react';\nimport ReactDOM from 'react-dom/client';\nimport './index.css';\nimport {DndProvider, useDrag, useDrop} from 'react-dnd'\nimport{HTML5Backend} from 'react-dnd-html5-backend'\n\n\n//Called from Sala to start the game. Probably not in the right place\nfunction startGame(skt, roomname){\n  console.log(`Se mando un request para comenzar el juego`);\n  skt.current.emit('comenzar-juego', roomname);\n};\n\n//Sala. Props inclused room and socket info\nfunction Sala(props){\n  //TODO: You can still play even if \"espera\" is on. Will fix during the refactor, when\n  // I just pass in props.room[users][usr] instead of mirroring \n  var boards = [];\n\n  const client = props.socket;\n  const roomname = props.room[\"sala\"]\n    console.log(roomname)\n  const fichas = props.room[\"fichas\"];\n  var espera = \"\"\n  \n  console.log(`Game room has updated, client: ${client.current.id}`)\n  console.log(`En el turno del jugador ${props.room[\"turno\"]}`)\n\n  if(props.room[\"activo\"]){\n    var idx = 0;\n    for(const usr in props.room[\"usuarios\"]){\n      console.log(`COLUMNAS: ${props.room[\"usuarios\"][usr][\"columnas\"]}`)\n      console.log(`CANASTA: ${props.room[\"usuarios\"][usr][\"canasta\"]}`)\n      var columnas = \"0\"\n      if(props.room[\"usuarios\"][usr][\"canasta\"]){\n        var columnas = props.room[\"usuarios\"][usr][\"canasta\"].toString()\n      }\n\n      //TODO: Why do i not just pass in props.room[users][usr] instead of pulling basically everything \n      //out of it here?\n      boards.push(<Player fichas={props.room[\"usuarios\"][usr][\"canasta\"]}\n                          activo = {props.room[\"activo\"]}\n                          columnas={props.room[\"usuarios\"][usr][\"columnas\"]}\n                          socket={client} \n                          roomname={roomname}\n                          username = {props.room[\"usuarios\"][usr][\"usuario\"]}\n                          puntuacion={props.room[\"usuarios\"][usr][\"puntuacion\"]}\n                          fichasEnCuarto={props.room[\"fichas\"]}\n                          tablero={props.room[\"usuarios\"][usr][\"tablero\"].flat()}\n                          turno = {props.room[\"turno\"]}\n                          room = {props.room}\n                          ronda = {props.room[\"ronda\"]}\n                          basura = {props.room[\"usuarios\"][usr][\"basura\"]}\n                          key = {props.room[\"usuarios\"][usr][\"usuario\"]}/>)\n    }\n  } else {\n    for(const usr in props.room[\"usuarios\"]){\n      boards.push(<Player key={usr} puntuacion ={props.room[\"usuarios\"][usr][\"puntuacion\"]}/>);\n    }\n  }\n  console.log(props.room[\"espera\"])\n  if(props.room[\"espera\"]){\n    console.log(\"626 EN ESPERA .... \")\n    espera = \"espera\"\n  }\n\n  return(\n    <DndProvider backend={HTML5Backend}>\n    <div> \n      <p> In room {props.room[\"sala\"]}</p>\n      <div id = {espera}> <p> PLEASE WAIT FOR RECONNECT </p> </div>\n      {fichas.length\n        ? \n        <div style={{display:\"inline-flex\"}} key=\"boards1\">{boards}</div>\n        :\n        <div style={{display:\"inline-flex\"}} key=\"boards2\"> \n        {boards}\n        <button onClick={() => startGame(client, roomname)}>\n          Start game\n        </button>\n        </div>\n      }\n    </div>\n    </DndProvider>\n  )\n}\n\nexport default Sala;"],"mappings":"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"},"metadata":{},"sourceType":"module"}